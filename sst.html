<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/6699FF/FFFFFF?text=T" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anyon_e</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Base styles with CSS variables for dynamic theming */
        :root {
            --bg-color: #f0f0f5;
            --header-color: #e7e0ec;
            --text-color: #1c1b1f;
            --text-muted: #72777a;
            --accent-color: #6699ff;
            --card-color: #e7e0ec;
            --card-shadow: rgba(0, 0, 0, 0.1);
            --menu-bg: rgba(231, 224, 236, 0.7); /* For glassmorphism */
        }

        /* Sunshine Burst Theme */
        body.sunshine-burst {
            --bg-color: #fef3e0;
            --header-color: #f7d9a1;
            --text-color: #4a2c14;
            --text-muted: #7c5c44;
            --accent-color: #f9a826;
            --card-color: #fcf0e3;
            --card-shadow: rgba(249, 168, 38, 0.2);
            --menu-bg: rgba(247, 217, 161, 0.7);
        }

        /* Cyber Tides Theme */
        body.cyber-tides {
            --bg-color: #0d1a26;
            --header-color: #1b2e40;
            --text-color: #e0f2ff;
            --text-muted: #a0c2d6;
            --accent-color: #00bcd4;
            --card-color: #1b2e40;
            --card-shadow: rgba(0, 188, 212, 0.2);
            --menu-bg: rgba(27, 46, 64, 0.7);
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-color);
            background: var(--bg-color);
            transition: background-color 0.5s ease, color 0.5s ease;
            overflow-x: hidden; /* Fix for horizontal scrollbar */
        }

        /* Header animation is now subtle */
        @keyframes headerPulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.005); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .header-animation {
            animation: headerPulse 3s infinite ease-in-out;
        }

        /* Polished Android-style card effect */
        .card-hover-effect {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 10px var(--card-shadow);
            background: var(--card-color);
            color: var(--text-color);
        }
        .card-hover-effect:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 8px 20px var(--card-shadow);
        }
        
        /* Custom scrollbar for a sleeker look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--header-color);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--text-muted);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-color);
        }

        /* Typing effect for the search bar placeholder */
        .typing-effect::after {
            content: '|';
            color: var(--text-muted);
            animation: blink-caret 0.75s step-end infinite;
        }
        
        @keyframes blink-caret {
            from, to { color: transparent }
            50% { color: var(--text-muted); }
        }

        /* Off-canvas menu styles */
        .off-canvas-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            background-color: var(--menu-bg);
        }
        .off-canvas-menu.active {
            transform: translateX(0);
        }
        .backdrop-blur-lg {
            backdrop-filter: blur(10px);
        }
        
        /* Toast notification styles */
        #toast-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) scale(0.9);
            opacity: 0;
            transition: all 0.3s ease-in-out;
            pointer-events: none;
            background: var(--text-color);
            color: var(--header-color);
            padding: 12px 24px;
            border-radius: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-size: 1rem;
            z-index: 1000;
        }

        #toast-notification.show {
            transform: translateX(-50%) scale(1);
            opacity: 1;
            pointer-events: auto;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // Using CSS variables for dynamic theming
                        primary: 'var(--accent-color)',
                        secondary: 'var(--text-muted)',
                        surface: 'var(--bg-color)',
                        'surface-variant': 'var(--header-color)',
                        onSurface: 'var(--text-color)',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-surface text-onSurface min-h-screen antialiased">

    <!-- Off-canvas menu -->
    <div id="menu" class="off-canvas-menu fixed inset-y-0 left-0 z-50 w-64 p-6 shadow-2xl flex flex-col justify-between backdrop-blur-lg">
        <!-- Menu content -->
        <div>
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Menu</h3>
                <button onclick="toggleMenu()" class="text-xl text-onSurface hover:text-primary transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Internet Status -->
            <div class="bg-surface p-4 rounded-xl shadow-inner mb-6">
                <p class="font-semibold text-sm">Internet Status:</p>
                <p id="status" class="text-lg font-bold"></p>
            </div>

            <!-- Theme Switcher -->
            <div class="space-y-4">
                <h4 class="font-semibold text-lg">Themes</h4>
                <button onclick="setTheme('android-12')" class="w-full text-left p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105" style="background-color: #e7e0ec; color: #1c1b1f;">
                    Android 12
                </button>
                <button onclick="setTheme('sunshine-burst')" class="w-full text-left p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105" style="background-color: #f7d9a1; color: #4a2c14;">
                    Sunshine Burst
                </button>
                <button onclick="setTheme('cyber-tides')" class="w-full text-left p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105" style="background-color: #1b2e40; color: #e0f2ff;">
                    Cyber Tides
                </button>
            </div>
        </div>
    </div>

    <!-- Main content area -->
    <div id="main-content" class="min-h-screen">
        <!-- Header -->
        <header class="bg-surface-variant bg-opacity-80 backdrop-filter backdrop-blur-lg text-onSurface font-extrabold text-center py-6 sm:py-8 lg:py-10 shadow-xl sticky top-0 z-20 header-animation rounded-b-[40px] border-b-2 border-surface flex items-center justify-between px-6 sm:px-8 lg:px-12">
            <!-- Hamburger menu button -->
            <button onclick="toggleMenu()" class="text-onSurface text-2xl lg:text-3xl hover:text-primary transition-colors">
                <i class="fas fa-bars"></i>
            </button>
            <!-- App title -->
            <div class="flex-grow flex justify-center items-center">
                <i class="fas fa-gem text-primary mr-2 sm:mr-4 text-3xl sm:text-4xl lg:text-5xl"></i>
                <span class="text-onSurface text-2xl sm:text-3xl lg:text-4xl font-extrabold">AnyOn_e</span>
            </div>
            
            <!-- Search Box with Typing Effect -->
            <div class="relative flex-grow-0 hidden sm:block w-full max-w-sm ml-auto">
                <input 
                    id="searchInput" 
                    type="text" 
                    class="w-full bg-surface py-2 px-6 pl-10 text-onSurface rounded-full focus:outline-none focus:ring-2 focus:ring-primary/50 transition-shadow duration-300 placeholder-onSurface/70 text-base"
                    placeholder=""
                />
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-secondary text-base"></i>
            </div>

            <!-- Spacer for alignment -->
            <div class="w-8 lg:w-12"></div>
        </header>

        <!-- Search box for mobile -->
        <div class="flex justify-center p-6 sm:p-8 sm:hidden">
            <div class="relative w-full">
                <input 
                    id="searchInputMobile" 
                    type="text" 
                    class="w-full bg-surface-variant text-onSurface rounded-full py-4 px-6 pl-12 text-lg focus:outline-none focus:ring-4 focus:ring-primary/50 transition-shadow duration-300 placeholder-onSurface/70"
                    placeholder=""
                />
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-secondary text-base"></i>
            </div>
        </div>

        <!-- Cards Container -->
        <div id="videoCards" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 sm:gap-8 p-6 sm:p-8 lg:p-10 max-w-7xl mx-auto">
            <!-- Video cards will be dynamically inserted here -->
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast-notification" class="hidden">
        <p id="toast-message"></p>
    </div>

    <script>
        // JSON video data
        const videos = [
            { "title": "The Rise of Nationalism L1", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4385660/174765773598337880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L2", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4386901/174774447851067880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L3", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4388156/174784213776117880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L4", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4389229/174791822718927880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L5", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4393945/174835110070857880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L6", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4395114/174844758699447880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L7", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4396261/174853315058577880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L8", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4406159/174955875139637880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L9", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4406366/174956988532027880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L10", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4407324/174964584764377880624/index_1.m3u8" },
            { "title": "The Rise of Nationalism in Europe L11", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4407497/174965714629147880624/index_1.m3u8" },
            { "title": "Doubt Solving Class", "url": "https://d1qcficr3lu37x.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4408429/174974249991017880624/index_1.m3u8" },
            { "title": "Forest And Wildlife Resources L1", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4411210/175007770550547125088/index_1.m3u8" },
            { "title": "Forest And Wildlife Resources L2", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4412488/175016414550777125088/index_1.m3u8" },
            { "title": "Forest And Wildlife Resources L3", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4413854/175026084256997125088/index_1.m3u8" },
            { "title": "Sectors of the Indian Economy - 1", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4414989/175034785995657125088/index_1.m3u8" },
            { "title": "Sectors of the Indian Economy L2", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4417609/175068233385897125088/index_1.m3u8" },
            { "title": "Sectors of the Indian Economy L3", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4418570/175076895626987125088/index_1.m3u8" },
            { "title": "Sectors of the Indian Economy L4", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4419824/175086546631887125088/index_1.m3u8" },
            { "title": "Sectors of the Indian Economy L5", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4460006/175128817639377125088/index_1.m3u8" },
            { "title": "Doubt Sectors of Indian Economy class L6", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4474850/175171924899657125088/index_1.m3u8" },
            { "title": "FEDERALISM- L1", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4475867/175189222398137125088/index_1.m3u8" },
            { "title": "FEDERALISM- L2", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4476771/175197811164887125088/index_1.m3u8" },
            { "title": "FEDERALISM- L3", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4478170/175207529421867125088/index_1.m3u8" },
            { "title": "FEDERALISM- L4", "url": "https%3A%2F%2Fd274dp7v20n4nf.cloudfront.net%2Ffile_library%2Fvideos%2Fchannel_vod_non_drm_hls%2F4479240%2F175216182823787125088%2Findex_1.m3u8" },
            { "title": "FEDERALISM- L5", "url": "https%3A%2F%2Fd274dp7v20n4nf.cloudfront.net%2Ffile_library%2Fvideos%2Fchannel_vod_non_drm_hls%2F4481883%2F175249719015327125088%2Findex_1.m3u8" },
            { "title": "Nationalism in India- L1", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4484117/175267984098967125088/index_1.m3u8" },
            { "title": "Nationalism in India- L2", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4485142/175276595260217125088/index_1.m3u8" },
            { "title": "Nationalism in India- L3", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4487942/175310190839187125088/index_1.m3u8" },
            { "title": "Nationalism in India- L4", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4489690/175318859641387125088/index_1.m3u8" },
            { "title": "Nationalism in India- L5", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4491671/175328504112427125088/index_1.m3u8" },
            { "title": "Nationalism in India- L6", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4492899/175337180752677125088/index_1.m3u8" },
            { "title": "Nationalism in India- L7", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4501558/175370673319757125088/index_1.m3u8" },
              { "title": "Nationalism in India- L8", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4503179/175379293685847125088/index_1.m3u8" },
        { "title": "Nationalism in India- L9", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4504558/175388963241567125088/index_1.m3u8" },
            { "title": "Nationalism in India- L10", "url": "https://d274dp7v20n4nf.cloudfront.net/file_library/videos/channel_vod_non_drm_hls/4505744/175397751675797125088/index_1.m3u8" },
            { "title": "Water Resources- L1", "url": "https%3A%2F%2Fd274dp7v20n4nf.cloudfront.net%2Ffile_library%2Fvideos%2Fchannel_vod_non_drm_hls%2F4514431%2F175449470435227125088%2Findex_1.m3u8" },
            
        ];

        const container = document.getElementById("videoCards");
        const searchInput = document.getElementById("searchInput");
        const searchInputMobile = document.getElementById("searchInputMobile");
        const menu = document.getElementById("menu");
        const toast = document.getElementById("toast-notification");
        const toastMessage = document.getElementById("toast-message");
        
        const placeholderPhrases = ["Search for a lecture...", "Type a lecture name...", "Find your lesson..."];
        let phraseIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        // Function to show toast notification
        function showToast(message) {
            toastMessage.textContent = message;
            toast.classList.remove("hidden");
            setTimeout(() => {
                toast.classList.add("show");
            }, 10); // Small delay for CSS transition
            
            setTimeout(() => {
                toast.classList.remove("show");
                setTimeout(() => {
                    toast.classList.add("hidden");
                }, 300); // Wait for transition to finish
            }, 3000);
        }

        // Function to set the theme
        function setTheme(themeName) {
            document.body.className = themeName;
            localStorage.setItem('theme', themeName);
        }

        // Apply saved theme on page load
        const savedTheme = localStorage.getItem('theme') || 'android-12';
        setTheme(savedTheme);

        // Function to toggle the menu
        function toggleMenu() {
            menu.classList.toggle('active');
        }

        // Function to create and append video cards
        const renderVideos = (videoList) => {
            container.innerHTML = ""; // Clear existing cards
            if (videoList.length === 0) {
                container.innerHTML = `<p class="col-span-full text-center text-secondary text-xl p-8">No lectures found.</p>`;
                return;
            }
            videoList.forEach(video => {
                const card = document.createElement("div");
                card.className = "card bg-surface-variant rounded-[30px] p-6 relative flex flex-col justify-between card-hover-effect cursor-pointer h-64";
                
                card.innerHTML = `
                    <button class="absolute top-4 right-4 text-secondary hover:text-primary transition-colors z-10" onclick="shareLecture(event, '${video.title}', '${video.url}')">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <div class="card-title text-center" onclick="openVideo('${video.url}')">
                        <h2 class="text-xl sm:text-2xl font-bold mb-1 text-primary">${video.title}</h2>
                        <p class="text-sm text-secondary">Social Science</p>
                    </div>
                    <div class="card-footer text-center text-base text-secondary mt-auto" onclick="openVideo('${video.url}')">
                        <i class="fas fa-play-circle text-primary mr-2 text-xl"></i> Click to watch
                    </div>
                `;
                
                container.appendChild(card);
            });
        };

        // Function to open video in new tab
        function openVideo(url) {
            const decodedUrl = decodeURIComponent(url);
            window.open(`https://studystreamx.netlify.app/?url=${decodedUrl}`, '_blank');
        }

        // Function to share lecture
        function shareLecture(event, title, url) {
            event.stopPropagation(); // Prevent the card from being clicked
            const decodedUrl = decodeURIComponent(url);
            const shareUrl = `https://studystreamx.netlify.app/?url=${decodedUrl}`;
            
            if (navigator.share) {
                navigator.share({
                    title: title,
                    text: `Check out this lecture: ${title}`,
                    url: shareUrl,
                }).then(() => {
                    showToast("Share dialog opened.");
                }).catch((error) => {
                    console.error('Error sharing:', error);
                });
            } else {
                // Fallback for browsers that don't support the Web Share API
                // Create a temporary input element to copy the text
                const tempInput = document.createElement('input');
                tempInput.value = shareUrl;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                showToast("Link copied to clipboard!");
            }
        }

        // Initial render of all videos
        renderVideos(videos);

        // Search functionality
        const handleSearch = (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredVideos = videos.filter(video => 
                video.title.toLowerCase().includes(searchTerm)
            );
            renderVideos(filteredVideos);
        };
        searchInput.addEventListener("input", handleSearch);
        searchInputMobile.addEventListener("input", handleSearch);
        
        // Typing effect for the placeholder
        const typeEffect = () => {
            const currentPhrase = placeholderPhrases[phraseIndex];
            const currentPlaceholder = isDeleting ? currentPhrase.substring(0, charIndex--) : currentPhrase.substring(0, charIndex++);
            
            searchInput.placeholder = currentPlaceholder;
            searchInputMobile.placeholder = currentPlaceholder;

            // Check if phrase is fully typed or deleted
            if (!isDeleting && charIndex > currentPhrase.length) {
                isDeleting = true;
                setTimeout(typeEffect, 1500); // Pause before deleting
            } else if (isDeleting && charIndex < 0) {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % placeholderPhrases.length;
                setTimeout(typeEffect, 500); // Pause before typing new phrase
            } else {
                setTimeout(typeEffect, isDeleting ? 75 : 150);
            }
        };

        // Check for internet status on window load and periodically
        const checkInternetStatus = () => {
            const statusElement = document.getElementById("status");
            if (navigator.onLine) {
                statusElement.textContent = "Online";
                statusElement.style.color = "green";
            } else {
                statusElement.textContent = "Offline";
                statusElement.style.color = "red";
            }
        };

        // Start the typing effect on window load and check internet status
        window.onload = () => {
            typeEffect();
            checkInternetStatus();
            
            // Re-check internet status periodically
            setInterval(checkInternetStatus, 5000); // Check every 5 seconds
        };
    </script>
</body>
</html>


